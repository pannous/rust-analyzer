<idea-plugin>
    <id>com.customra.rust-analyzer</id>
    <name>Custom Rust Analyzer</name>
    <vendor>Custom</vendor>
    <description><![CDATA[
        Bundles a custom rust-analyzer with extended syntax support:
        <ul>
            <li>Semicolon inference from newlines</li>
            <li>Power operator (**)</li>
            <li>Unicode operators</li>
            <li>'not' prefix operator</li>
            <li>and/or/xor operator aliases</li>
        </ul>
        Registers as LSP server via LSP4IJ.
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends optional="true" config-file="lsp4ij-support.xml">com.redhat.devtools.lsp4ij</depends>

    <extensions defaultExtensionNs="com.intellij">
        <applicationService
            serviceImplementation="com.customra.BinaryManager"/>
        <consoleFilterProvider
            implementation="com.customra.run.RustcConsoleFilterProvider"/>
        <fileType
            name="Rustx"
            implementationClass="com.customra.RustxFileType"
            fieldName="INSTANCE"
            language="Rustx"
            extensions="rs;rust;rx;roo;ðŸ¦€;ðŸ“;ðŸ¦˜"/>
        <configurationType
            implementation="com.customra.run.RustRunConfigurationType"/>
        <runConfigurationProducer
            implementation="com.customra.run.RustRunConfigurationProducer"/>
        <lang.commenter
            language="Rustx"
            implementationClass="com.customra.RustxCommenter"/>
    </extensions>

    <actions>
        <action id="customra.run"
                class="com.customra.run.RustRunAction"
                text="Run with Custom Rust"
                description="Run Rust file with custom compiler">
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="first"/>
            <add-to-group group-id="RunMenu" anchor="first"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt R"/>
        </action>
    </actions>
</idea-plugin>
